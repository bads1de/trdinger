# è‡ªå‹•æˆ¦ç•¥ç”Ÿæˆæ©Ÿèƒ½ å®Ÿè£…å®Œäº†å ±å‘Š

## ðŸ“‹ å®Ÿè£…æ¦‚è¦

éºä¼çš„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼ˆGAï¼‰ã‚’ä½¿ç”¨ã—ãŸå–å¼•æˆ¦ç•¥ã®è‡ªå‹•ç”Ÿæˆæ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¾ã—ãŸã€‚
è¨­è¨ˆæ›¸ã¨å®Ÿè£…è¨ˆç”»æ›¸ã«åŸºã¥ãã€æ®µéšŽçš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§å®Œå…¨ãªæ©Ÿèƒ½ã‚’æ§‹ç¯‰ã—ã¾ã—ãŸã€‚

## âœ… å®Œäº†ã—ãŸå®Ÿè£…

### ãƒ•ã‚§ãƒ¼ã‚º1: åŸºç›¤å®Ÿè£…

#### 1. æˆ¦ç•¥éºä¼å­ãƒ¢ãƒ‡ãƒ« (`StrategyGene`)
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/app/core/services/auto_strategy/models/strategy_gene.py`
- **æ©Ÿèƒ½**:
  - æŒ‡æ¨™éºä¼å­ï¼ˆ`IndicatorGene`ï¼‰ã®å®šç¾©
  - å£²è²·æ¡ä»¶ï¼ˆ`Condition`ï¼‰ã®å®šç¾©
  - éºä¼å­ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰/ãƒ‡ã‚³ãƒ¼ãƒ‰æ©Ÿèƒ½ï¼ˆv1ä»•æ§˜ï¼‰
  - JSON ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³
  - å¦¥å½“æ€§æ¤œè¨¼

#### 2. GAè¨­å®šãƒ¢ãƒ‡ãƒ« (`GAConfig`)
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/app/core/services/auto_strategy/models/ga_config.py`
- **æ©Ÿèƒ½**:
  - GAåŸºæœ¬ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆå€‹ä½“æ•°ã€ä¸–ä»£æ•°ã€äº¤å‰çŽ‡ã€çªç„¶å¤‰ç•°çŽ‡ï¼‰
  - ãƒ•ã‚£ãƒƒãƒˆãƒã‚¹é‡ã¿è¨­å®š
  - åˆ¶ç´„æ¡ä»¶ç®¡ç†
  - ãƒ—ãƒªã‚»ãƒƒãƒˆè¨­å®šï¼ˆé«˜é€Ÿã€æ¨™æº–ã€å¾¹åº•ï¼‰

#### 3. æˆ¦ç•¥ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼ (`StrategyFactory`)
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/app/core/services/auto_strategy/factories/strategy_factory.py`
- **æ©Ÿèƒ½**:
  - éºä¼å­ã‹ã‚‰å‹•çš„æˆ¦ç•¥ã‚¯ãƒ©ã‚¹ç”Ÿæˆ
  - æ—¢å­˜TALibAdapterã¨ã®çµ±åˆ
  - 21ç¨®é¡žã®ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™å¯¾å¿œ
  - backtesting.pyäº’æ›æ€§

#### 4. GAã‚¨ãƒ³ã‚¸ãƒ³ (`GeneticAlgorithmEngine`)
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/app/core/services/auto_strategy/engines/ga_engine.py`
- **æ©Ÿèƒ½**:
  - DEAP ãƒ©ã‚¤ãƒ–ãƒ©ãƒªçµ±åˆ
  - ä¸¦åˆ—å‡¦ç†å¯¾å¿œ
  - é€²æ—ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½
  - ã‚¨ãƒªãƒ¼ãƒˆä¿å­˜æˆ¦ç•¥

#### 5. çµ±åˆã‚µãƒ¼ãƒ“ã‚¹ (`AutoStrategyService`)
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/app/core/services/auto_strategy/services/auto_strategy_service.py`
- **æ©Ÿèƒ½**:
  - GAå®Ÿè¡Œç®¡ç†
  - ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å®Ÿè¡Œ
  - é€²æ—ç›£è¦–
  - çµæžœä¿å­˜

### ãƒ•ã‚§ãƒ¼ã‚º2: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ»API

#### 1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒž
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/database/models.py`
- **è¿½åŠ ãƒ†ãƒ¼ãƒ–ãƒ«**:
  - `ga_experiments` - GAå®Ÿé¨“æƒ…å ±
  - `generated_strategies` - ç”Ÿæˆã•ã‚ŒãŸæˆ¦ç•¥
- **æ©Ÿèƒ½**:
  - å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„
  - ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æœ€é©åŒ–
  - JSON ãƒ‡ãƒ¼ã‚¿ä¿å­˜

#### 2. APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/app/api/auto_strategy.py`
- **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**:
  - `POST /api/auto-strategy/generate` - GAå®Ÿè¡Œé–‹å§‹
  - `GET /api/auto-strategy/experiments/{id}/progress` - é€²æ—å–å¾—
  - `GET /api/auto-strategy/experiments/{id}/results` - çµæžœå–å¾—
  - `GET /api/auto-strategy/experiments` - å®Ÿé¨“ä¸€è¦§
  - `POST /api/auto-strategy/experiments/{id}/stop` - å®Ÿé¨“åœæ­¢
  - `POST /api/auto-strategy/test-strategy` - æˆ¦ç•¥ãƒ†ã‚¹ãƒˆ
  - `GET /api/auto-strategy/config/presets` - è¨­å®šãƒ—ãƒªã‚»ãƒƒãƒˆ

### ãƒ•ã‚§ãƒ¼ã‚º3: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

#### 1. GAConfigForm
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `frontend/components/backtest/GAConfigForm.tsx`
- **æ©Ÿèƒ½**:
  - GAè¨­å®šãƒ•ã‚©ãƒ¼ãƒ 
  - ãƒ—ãƒªã‚»ãƒƒãƒˆé¸æŠž
  - æŒ‡æ¨™é¸æŠžï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ï¼‰
  - ãƒ•ã‚£ãƒƒãƒˆãƒã‚¹é‡ã¿è¨­å®š

#### 2. GAProgressDisplay
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `frontend/components/backtest/GAProgressDisplay.tsx`
- **æ©Ÿèƒ½**:
  - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€²æ—è¡¨ç¤º
  - é€²æ—ãƒãƒ¼
  - çµ±è¨ˆæƒ…å ±ï¼ˆæœ€é«˜ãƒ»å¹³å‡ãƒ•ã‚£ãƒƒãƒˆãƒã‚¹ï¼‰
  - å®Ÿè¡Œæ™‚é–“ãƒ»æŽ¨å®šæ®‹ã‚Šæ™‚é–“
  - æœ€è‰¯æˆ¦ç•¥ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼

#### 3. useGAProgress ãƒ•ãƒƒã‚¯
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `frontend/hooks/useGAProgress.tsx`
- **æ©Ÿèƒ½**:
  - é€²æ—ãƒãƒ¼ãƒªãƒ³ã‚°
  - çŠ¶æ…‹ç®¡ç†
  - ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†
  - GAå®Ÿè¡Œç®¡ç†

#### 4. OptimizationModalçµ±åˆ
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `frontend/components/backtest/OptimizationModal.tsx`
- **æ©Ÿèƒ½**:
  - GAã‚¿ãƒ–è¿½åŠ 
  - æ—¢å­˜æœ€é©åŒ–æ©Ÿèƒ½ã¨ã®çµ±åˆ
  - åž‹å®šç¾©è¿½åŠ 

## ðŸ§ª ãƒ†ã‚¹ãƒˆçµæžœ

### åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
```
ðŸŽ¯ ãƒ†ã‚¹ãƒˆçµæžœ: 5/5 æˆåŠŸ
âœ… æˆ¦ç•¥éºä¼å­ãƒ¢ãƒ‡ãƒ«
âœ… GAè¨­å®šãƒ¢ãƒ‡ãƒ«
âœ… æˆ¦ç•¥ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼
âœ… DEAPãƒ©ã‚¤ãƒ–ãƒ©ãƒªçµ±åˆ
âœ… ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½
```

### å¯¾å¿œæŒ‡æ¨™
- **ãƒˆãƒ¬ãƒ³ãƒ‰ç³»**: SMA, EMA, TEMA, DEMA, T3, WMA, KAMA
- **ãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ ç³»**: RSI, STOCH, CCI, WILLIAMS, ADX, AROON, MFI, MOMENTUM, ROC
- **ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ç³»**: ATR, NATR, TRANGE
- **è¤‡åˆæŒ‡æ¨™**: MACD, Bollinger Bands

## ðŸ”§ æŠ€è¡“ä»•æ§˜

### v1ä»•æ§˜ã®åˆ¶ç´„
- æœ€å¤§5æŒ‡æ¨™ã¾ã§
- å˜ç´”æ¯”è¼ƒæ¡ä»¶ã®ã¿ï¼ˆ>, <, cross_above, cross_belowï¼‰
- å›ºå®šé•·æ•°å€¤ãƒªã‚¹ãƒˆã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ï¼ˆ16è¦ç´ ï¼‰

### ä¾å­˜é–¢ä¿‚
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: DEAP 1.4, SQLAlchemy, FastAPI
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: React, TypeScript, Tailwind CSS
- **çµ±åˆ**: æ—¢å­˜TALibAdapter, BacktestService

## ðŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 

```
backend/app/core/services/auto_strategy/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ strategy_gene.py
â”‚   â””â”€â”€ ga_config.py
â”œâ”€â”€ engines/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ ga_engine.py
â”œâ”€â”€ factories/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ strategy_factory.py
â””â”€â”€ services/
    â”œâ”€â”€ __init__.py
    â””â”€â”€ auto_strategy_service.py

frontend/components/backtest/
â”œâ”€â”€ GAConfigForm.tsx
â””â”€â”€ GAProgressDisplay.tsx

frontend/hooks/
â””â”€â”€ useGAProgress.tsx
```

## ðŸš€ ä½¿ç”¨æ–¹æ³•

### 1. ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã§ã®åˆ©ç”¨
1. ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã‚’é–‹ã
2. ã€Œæœ€é©åŒ–ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ã€Œè‡ªå‹•ç”Ÿæˆ (GA)ã€ã‚¿ãƒ–ã‚’é¸æŠž
4. GAè¨­å®šã‚’å…¥åŠ›
5. ã€ŒGAæˆ¦ç•¥ç”Ÿæˆé–‹å§‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
6. é€²æ—ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ç›£è¦–

### 2. APIç›´æŽ¥åˆ©ç”¨
```bash
# GAå®Ÿè¡Œé–‹å§‹
curl -X POST "http://localhost:8000/api/auto-strategy/generate" \
  -H "Content-Type: application/json" \
  -d '{
    "experiment_name": "BTC_Strategy_Gen_001",
    "base_config": {
      "symbol": "BTC/USDT",
      "timeframe": "1h",
      "start_date": "2024-01-01",
      "end_date": "2024-12-19",
      "initial_capital": 100000,
      "commission_rate": 0.00055
    },
    "ga_config": {
      "population_size": 50,
      "generations": 30
    }
  }'

# é€²æ—ç¢ºèª
curl "http://localhost:8000/api/auto-strategy/experiments/{experiment_id}/progress"
```

## ðŸ”„ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### çŸ­æœŸçš„æ”¹å–„
1. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹æœ€é©åŒ–**
   - ä¸¦åˆ—å‡¦ç†ã®åŠ¹çŽ‡åŒ–
   - ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®æœ€é©åŒ–

2. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–**
   - ã‚ˆã‚Šè©³ç´°ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
   - å¾©æ—§æ©Ÿèƒ½

3. **UI/UXæ”¹å–„**
   - é€²æ—è¡¨ç¤ºã®è©³ç´°åŒ–
   - çµæžœå¯è¦–åŒ–ã®å¼·åŒ–

### ä¸­é•·æœŸçš„æ‹¡å¼µ
1. **v2ä»•æ§˜ã¸ã®æ‹¡å¼µ**
   - è¤‡é›‘ãªæ¡ä»¶å¼å¯¾å¿œ
   - å‹•çš„æŒ‡æ¨™æ•°
   - ã‚«ã‚¹ã‚¿ãƒ æŒ‡æ¨™å¯¾å¿œ

2. **é«˜åº¦ãªæ©Ÿèƒ½**
   - ãƒžãƒ«ãƒç›®çš„æœ€é©åŒ–
   - å¼·åŒ–å­¦ç¿’ã¨ã®çµ±åˆ
   - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æˆ¦ç•¥é©å¿œ

## ðŸ“Š æœŸå¾…ã•ã‚Œã‚‹åŠ¹æžœ

1. **æˆ¦ç•¥é–‹ç™ºã®åŠ¹çŽ‡åŒ–**
   - æ‰‹å‹•è¨­è¨ˆæ™‚é–“ã®å¤§å¹…çŸ­ç¸®
   - å¤šæ§˜ãªæˆ¦ç•¥ã®è‡ªå‹•æŽ¢ç´¢

2. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹å‘ä¸Š**
   - ãƒ‡ãƒ¼ã‚¿ãƒ‰ãƒªãƒ–ãƒ³ãªæˆ¦ç•¥ç”Ÿæˆ
   - éŽå­¦ç¿’ã®å›žé¿

3. **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£**
   - å¤§é‡ã®æˆ¦ç•¥å€™è£œã®è©•ä¾¡
   - ç¶™ç¶šçš„ãªæ”¹å–„

## ðŸŽ‰ çµè«–

éºä¼çš„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ä½¿ç”¨ã—ãŸè‡ªå‹•æˆ¦ç•¥ç”Ÿæˆæ©Ÿèƒ½ã®å®Ÿè£…ãŒå®Œäº†ã—ã¾ã—ãŸã€‚
åŸºç›¤ã¨ãªã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰çµ±åˆã‚·ã‚¹ãƒ†ãƒ ã¾ã§ã€è¨­è¨ˆæ›¸ã«åŸºã¥ã„ãŸå®Œå…¨ãªæ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚

ã“ã®å®Ÿè£…ã«ã‚ˆã‚Šã€ãƒˆãƒ¬ãƒ¼ãƒ€ãƒ¼ã¯æ‰‹å‹•ã§ã®æˆ¦ç•¥è¨­è¨ˆã«åŠ ãˆã¦ã€
AIã«ã‚ˆã‚‹è‡ªå‹•æˆ¦ç•¥ç”Ÿæˆã¨ã„ã†æ–°ã—ã„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
