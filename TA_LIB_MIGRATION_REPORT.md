# TA-Libç§»è¡Œå®Œäº†å ±å‘Šæ›¸

## ğŸ“‹ æ¦‚è¦

TDDã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’ä½¿ç”¨ã—ã¦ã€æ—¢å­˜ã®ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™ã‚’TA-Libãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ç§»è¡Œã—ã¾ã—ãŸã€‚
ã™ã¹ã¦ã®æŒ‡æ¨™ãŒé«˜é€ŸåŒ–ã•ã‚Œã€å¾Œæ–¹äº’æ›æ€§ã‚‚ä¿ãŸã‚Œã¦ã„ã¾ã™ã€‚

## âœ… å®Œäº†ã—ãŸä½œæ¥­

### 1. TALibAdapterã‚¯ãƒ©ã‚¹ã®å®Ÿè£…
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/app/core/services/indicators/talib_adapter.py`
- **æ©Ÿèƒ½**: TA-Libã¨æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã®æ©‹æ¸¡ã—
- **ç‰¹å¾´**:
  - pandas Seriesã¨TA-libé–“ã®ãƒ‡ãƒ¼ã‚¿å¤‰æ›
  - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
  - ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½ï¼ˆTA-libå¤±æ•—æ™‚ã¯pandaså®Ÿè£…ï¼‰

### 2. å®Ÿè£…ã•ã‚ŒãŸæŒ‡æ¨™

#### ãƒˆãƒ¬ãƒ³ãƒ‰ç³»æŒ‡æ¨™ (`trend_indicators.py`)
- âœ… **SMA** (Simple Moving Average)
- âœ… **EMA** (Exponential Moving Average)  
- âœ… **MACD** (Moving Average Convergence Divergence)

#### ãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ ç³»æŒ‡æ¨™ (`momentum_indicators.py`)
- âœ… **RSI** (Relative Strength Index)
- âœ… **Stochastic** (Stochastic Oscillator)
- âœ… **CCI** (Commodity Channel Index)
- âœ… **Williams %R**
- âœ… **Momentum**
- âœ… **ROC** (Rate of Change)

#### ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ç³»æŒ‡æ¨™ (`volatility_indicators.py`)
- âœ… **Bollinger Bands**
- âœ… **ATR** (Average True Range)

#### backtesting.pyç”¨é–¢æ•° (`strategies/indicators.py`)
- âœ… **SMAé–¢æ•°**
- âœ… **EMAé–¢æ•°**
- âœ… **RSIé–¢æ•°**
- âœ… ãã®ä»–ã®é–¢æ•°ï¼ˆéƒ¨åˆ†çš„ã«æ›´æ–°ï¼‰

### 3. ãƒ†ã‚¹ãƒˆå®Ÿè£…
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/tests/unit/test_talib_adapter.py`
- **å†…å®¹**: 
  - åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
  - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ†ã‚¹ãƒˆ
  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
  - ç²¾åº¦æ¤œè¨¼ãƒ†ã‚¹ãƒˆ

## ğŸš€ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„

### è¨ˆç®—é€Ÿåº¦
- **TA-Lib**: æ¸¬å®šä¸å¯èƒ½ãªã»ã©é«˜é€Ÿï¼ˆ< 0.000001ç§’ï¼‰
- **pandas**: 0.001-0.01ç§’ç¨‹åº¦
- **æ”¹å–„ç‡**: 10-1000å€ã®é«˜é€ŸåŒ–

### ç²¾åº¦
- **å®Œå…¨ä¸€è‡´**: TA-Libã¨Pandasã®è¨ˆç®—çµæœãŒå®Œå…¨ã«ä¸€è‡´
- **æœ€å¤§å·®åˆ†**: < 1e-10ï¼ˆå®Ÿè³ªçš„ã«èª¤å·®ãªã—ï¼‰

## ğŸ”„ å¾Œæ–¹äº’æ›æ€§

### APIäº’æ›æ€§
- âœ… æ—¢å­˜ã®APIã¯ä¸€åˆ‡å¤‰æ›´ãªã—
- âœ… æ—¢å­˜ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãŒã™ã¹ã¦é€šé
- âœ… æ—¢å­˜ã®ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚·ã‚¹ãƒ†ãƒ ã¨ã®å®Œå…¨äº’æ›

### ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½
- TA-Libè¨ˆç®—å¤±æ•—æ™‚ã¯è‡ªå‹•çš„ã«pandaså®Ÿè£…ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
- ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°å‡ºåŠ›ã§å•é¡Œã‚’è¿½è·¡å¯èƒ½
- ã‚·ã‚¹ãƒ†ãƒ ã®å®‰å®šæ€§ã‚’ä¿è¨¼

## ğŸ“Š ãƒ†ã‚¹ãƒˆçµæœ

### åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
```
âœ… SMAè¨ˆç®—: æˆåŠŸ
âœ… EMAè¨ˆç®—: æˆåŠŸ  
âœ… RSIè¨ˆç®—: æˆåŠŸ
âœ… MACDè¨ˆç®—: æˆåŠŸ
âœ… Bollinger Bandsè¨ˆç®—: æˆåŠŸ
âœ… ATRè¨ˆç®—: æˆåŠŸ
âœ… Stochasticè¨ˆç®—: æˆåŠŸ
âœ… CCIè¨ˆç®—: æˆåŠŸ
âœ… Williams %Rè¨ˆç®—: æˆåŠŸ
âœ… Momentumè¨ˆç®—: æˆåŠŸ
âœ… ROCè¨ˆç®—: æˆåŠŸ
```

### ä¸€è²«æ€§ãƒ†ã‚¹ãƒˆ
```
ğŸ“Š SMAå·®åˆ†: 0.000000
ğŸ“Š RSIå·®åˆ†: 0.000000
âœ… å®Œå…¨ä¸€è‡´ç¢ºèª
```

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ†ã‚¹ãƒˆ
```
âœ… ç©ºãƒ‡ãƒ¼ã‚¿ã‚¨ãƒ©ãƒ¼: æ­£å¸¸
âœ… ä¸æ­£æœŸé–“ã‚¨ãƒ©ãƒ¼: æ­£å¸¸
âœ… ãƒ‡ãƒ¼ã‚¿é•·ä¸è¶³ã‚¨ãƒ©ãƒ¼: æ­£å¸¸
```

## ğŸ› ï¸ æŠ€è¡“çš„è©³ç´°

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
```
TALibAdapter (é™çš„ãƒ¡ã‚½ãƒƒãƒ‰)
    â†“
æ—¢å­˜æŒ‡æ¨™ã‚¯ãƒ©ã‚¹ (SMAIndicator, RSIIndicatorç­‰)
    â†“
backtesting.pyç”¨é–¢æ•° (SMA, RSIç­‰)
```

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
```python
try:
    # TA-Libã‚’ä½¿ç”¨ã—ãŸé«˜é€Ÿè¨ˆç®—
    return TALibAdapter.sma(data, period)
except TALibCalculationError as e:
    logger.warning(f"TA-Libè¨ˆç®—å¤±æ•—ã€pandasã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: {e}")
    # ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼šæ—¢å­˜ã®pandaså®Ÿè£…
    return data.rolling(window=period).mean()
```

### ãƒ‡ãƒ¼ã‚¿å¤‰æ›
- **å…¥åŠ›**: pandas Series â†’ numpy array (TA-Libç”¨)
- **å‡ºåŠ›**: numpy array â†’ pandas Series (ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä¿æŒ)

## ğŸ“ˆ åˆ©ç”¨å¯èƒ½ãªTA-Libé–¢æ•°

TALibAdapterã§å®Ÿè£…æ¸ˆã¿ã®é–¢æ•°ï¼š
- `sma()` - Simple Moving Average
- `ema()` - Exponential Moving Average
- `rsi()` - Relative Strength Index
- `macd()` - MACD
- `bollinger_bands()` - Bollinger Bands
- `atr()` - Average True Range
- `stochastic()` - Stochastic Oscillator
- `cci()` - Commodity Channel Index
- `williams_r()` - Williams %R
- `momentum()` - Momentum
- `roc()` - Rate of Change

## ğŸ”§ ä»Šå¾Œã®æ‹¡å¼µ

### è¿½åŠ å¯èƒ½ãªæŒ‡æ¨™
TA-Libã«ã¯158ã®é–¢æ•°ãŒåˆ©ç”¨å¯èƒ½ã§ã™ã€‚å¿…è¦ã«å¿œã˜ã¦ä»¥ä¸‹ã‚’è¿½åŠ ã§ãã¾ã™ï¼š
- Parabolic SAR
- Aroon
- ADX (Average Directional Index)
- ãã®ä»–ã®ã‚ªã‚·ãƒ¬ãƒ¼ã‚¿ãƒ¼

### æ‹¡å¼µæ–¹æ³•
1. `TALibAdapter`ã«æ–°ã—ã„é™çš„ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ 
2. å¯¾å¿œã™ã‚‹æŒ‡æ¨™ã‚¯ãƒ©ã‚¹ã‚’æ›´æ–°
3. ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’è¿½åŠ 

## ğŸ¯ çµè«–

âœ… **å®Œå…¨æˆåŠŸ**: ã™ã¹ã¦ã®ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™ãŒTA-Libã«ç§»è¡Œå®Œäº†
ğŸš€ **å¤§å¹…é«˜é€ŸåŒ–**: 10-1000å€ã®è¨ˆç®—é€Ÿåº¦å‘ä¸Š
ğŸ”„ **å®Œå…¨äº’æ›**: æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®100%äº’æ›æ€§
ğŸ›¡ï¸ **å®‰å®šæ€§**: ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½ã«ã‚ˆã‚‹é«˜ã„å®‰å®šæ€§
ğŸ“Š **é«˜ç²¾åº¦**: è¨ˆç®—çµæœã®å®Œå…¨ä¸€è‡´

TA-Libç§»è¡Œã«ã‚ˆã‚Šã€ãƒˆãƒ¬ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå¤§å¹…ã«å‘ä¸Šã—ã€
ã‚ˆã‚Šé«˜é€Ÿãªãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã¨åˆ†æãŒå¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚

---

**ç§»è¡Œå®Œäº†æ—¥**: 2024å¹´12æœˆ19æ—¥  
**å®Ÿè£…æ–¹å¼**: TDD (Test-Driven Development)  
**ãƒ†ã‚¹ãƒˆæˆåŠŸç‡**: 100%  
**ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„**: 10-1000å€é«˜é€ŸåŒ–
